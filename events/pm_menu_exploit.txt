#Exploit menu
namespace = pm_menu_exploit
country_event = {
    id = pm_menu_exploit.1
    title = "pm_exploit_menu_title"
    desc = "pm_exploit_menu_desc"
    is_triggered_only = yes
#Send manpower
option = {
    name = "pm_steal_manpower"
    trigger = { 
        event_target:pm_target = {
            manpower_percentage = 0.25
            NOT = {
                has_country_modifier = pm_flag_stealmp
            }
        }  
    }
    hidden_effect = {

        event_target:pm_target = {
            add_country_modifier = {
                name = pm_flag_stealmp
                duration = 180         
            }           
        }

    }
    event_target:pm_target = {
        add_liberty_desire = 20
    }
    #Send 1000
    if = {
        limit = { 
            #check_variable = { which = manpower_to_send value = 0.1 }
            NOT = { check_variable = { which = manpower_to_send value = 5 } }
        }
        add_manpower = 1
        event_target:pm_target = {
            add_manpower = -1
        }
    }
    #Send 5000
    if = {
        limit = { 
            check_variable = { which = manpower_to_send value = 5 } 
            NOT = { check_variable = { which = manpower_to_send value = 10 } }
        }
        add_manpower = 5
        event_target:pm_target = {
            add_manpower = -5
        }
    }
    #Send 10000
    if = {
        limit = { 
            check_variable = { which = manpower_to_send value = 10 }
            NOT = { check_variable = { which = manpower_to_send value = 25 } }
        }
        add_manpower = 10
        event_target:pm_target = {
            add_manpower = -10
        } 
    }
    #Send 20000
    if = {
        limit = { 
            check_variable = { which = manpower_to_send value = 20 }
            NOT = { check_variable = { which = manpower_to_send value = 50 } }
        }
        add_manpower = 20
        event_target:pm_target = {
            add_manpower = -20
        }
    }
    #Send 50000
    if = {
        limit = { 
            check_variable = { which = manpower_to_send value = 50 }
        }
        add_manpower = 50
        event_target:pm_target = {
            add_manpower = -50
        }
    }
    hidden_effect = {
        clr_global_flag = pm_diplomacy_engaged
    }
}
    #Mil
    option = {
        name = "pm_exloit_mil"
        trigger = {
            event_target:pm_target = {
                has_country_modifier = pm_mil
                NOT = {
                    has_country_modifier = pm_flag_e_mil
                }
            }
        }
        event_target:pm_target = {
            add_liberty_desire = 10
            add_mil_power = -50
            hidden_effect = {
                add_country_modifier = {
                    name = pm_flag_e_mil
                    duration = 1800
                }
            }            
        }
        event_target:pm_overlord = {
        create_general = {
            tradition = 60
        }
        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }  
    }
    option = {
        name = "pm_exloit_adv_mil"
        trigger = {
        event_target:pm_target = {
            has_country_modifier = pm_mil
            NOT = {
                has_country_modifier = pm_flag_e_mil_adv
            }
        }
    }
        event_target:pm_target = {
            add_liberty_desire = 10
            add_treasury = -25
            hidden_effect = {
                add_country_modifier = {
                    name = pm_flag_e_mil_adv
                    duration = 1800
                }
            }            
        }
        event_target:pm_overlord = {
            define_advisor = {
            type = grand_captain
            discount = yes
            skill = 3
            }
        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }
    }       
    
    #Nav
    option = {
        name = "pm_exloit_nav"
        trigger = {
            event_target:pm_target = {
                has_country_modifier = pm_nav
                NOT = {
                    has_country_modifier = pm_flag_e_nav
                }
            }
        }
        event_target:pm_target = {
            add_liberty_desire = 10
            add_dip_power = -50
            hidden_effect = {
                add_country_modifier = {
                    name = pm_flag_e_nav
                    duration = 1800
                }
            }            
        }
        event_target:pm_overlord = {
        create_admiral = {
            tradition = 60
        }
        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }   
    }
    #Adm
    option = {
        name = "pm_exloit_adm"
        trigger = {
            event_target:pm_target = {
                has_country_modifier = pm_adm
                NOT = {
                    has_country_modifier = pm_flag_e_adm
                }
            }
        }
        event_target:pm_target = {
            add_liberty_desire = 10
            add_adm_power = -50
            hidden_effect = {
                add_country_modifier = {
                    name = pm_flag_e_adm
                    duration = 1800
                }
            }            
        }
        event_target:pm_overlord = {
            define_advisor = {
            type = artist
            discount = yes
            skill = 3
            }
        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }
    }
    option = {
        name = "pm_exloit_adm"
        trigger = {
            event_target:pm_target = {
                has_country_modifier = pm_adm
                NOT = {
                    has_country_modifier = pm_flag_e_adm
                }
            }
        }
        event_target:pm_target = {
            add_liberty_desire = 10
            add_adm_power = -50
            hidden_effect = {
                add_country_modifier = {
                    name = pm_flag_e_adm
                    duration = 1800
                }
            }            
        }
        event_target:pm_overlord = {
            define_advisor = {
            type = theologian
            discount = yes
            skill = 3
            }
        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }
    }
    #Rel
    option = {
        name = "pm_exloit_rel"
        trigger = {
            event_target:pm_target = {
                has_country_modifier = pm_rel
                NOT = {
                    has_country_modifier = pm_flag_e_rel
                }
            }
        }
        event_target:pm_target = {
            add_liberty_desire = 10
            add_adm_power = -50
            hidden_effect = {
                add_country_modifier = {
                    name = pm_flag_e_rel
                    duration = 1800
                }
            }            
        }
        event_target:pm_overlord = {
            define_advisor = {
            type = inquisitor
            discount = yes
            skill = 3
            }
        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }
    }
    #Dev
    option = {
        name = "pm_exploit_dev"
        trigger = {
            event_target:pm_target = {
                has_country_modifier = pm_dev
            }
            NOT = {
                has_country_modifier = pm_flag_e_dev
            }
        }
        event_target:pm_target = {
            random_owned_province = {
                add_base_manpower = -1
            }
            random_owned_province = {
                add_base_production = -1
            }
            random_owned_province = {
                add_base_manpower = -1
            }
            add_liberty_desire = 35
            hidden_effect = {
                add_country_modifier = {
                    name = pm_flag_e_dev
                    duration = 1080
                }
            }            
        }
        event_target:pm_target = {
        capital_scope = {
            add_base_manpower = 1
            add_base_production = 1
            add_base_tax = 1
        }
        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }
    }
    #Col
    option = {
        name = "pm_steal_colony"
        trigger = {
            event_target:pm_target = {
                has_country_modifier = pm_col
                colony = 1
                NOT = {
                    liberty_desire = 50
                }
            }
        }
        event_target:pm_target = {
            random_subject_country = {
                limit = {
                    is_subject_of_type = colony
                }
                hidden_effect = {
                save_event_target_as = pm_subject_to_transfer
                }
                }
                add_liberty_desire = 75
            }

        event_target:pm_overlord = {
            create_subject = {
                subject_type = colony
                subject = event_target:pm_subject_to_transfer
                
            }
        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }
    }
    option = {
        name = "pm_steal_company"
        trigger = {
            event_target:pm_target = {
                has_country_modifier = pm_col
                NOT = {
                    liberty_desire = 50
                }
                any_owned_province = {
                    is_owned_by_trade_company = yes
                }
            }
        }
        event_target:pm_target = {
            random_owned_province = {
                limit = {
                    is_owned_by_trade_company = yes
                }
                cede_province = event_target:pm_overlord
                add_territorial_core = event_target:pm_overlord
                remove_territorial_core = event_target:pm_target
                if = {
                    limit = {
                        development = 10
                    }
                    PREV = {
                        add_liberty_desire = 10
                    }
                }

            }
            add_liberty_desire = 15

        }
        hidden_effect = {
            clr_global_flag = pm_diplomacy_engaged
        }
    }


    #Quit
    option = {
        name = "pm_back_basic"
        hidden_effect = {
        country_event = {
            id = pm_menu.1
        }
    }
    }
}